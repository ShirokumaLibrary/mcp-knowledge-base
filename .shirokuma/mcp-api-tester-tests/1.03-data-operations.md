# Data Retrieval & Update Tests

Test read and update operations on created data.

## Test 3.1: Get Item Details

### Get Issue Details
```
Tool: mcp__shirokuma-kb-dev__get_item
Parameters: {id: 1}
Expected: Full issue object with all fields
```

### Get Non-existent Item
```
Tool: mcp__shirokuma-kb-dev__get_item
Parameters: {id: 999}
Expected: Error or null response
```

## Test 3.2: List Items with Filters

### List Open Issues
```
Tool: mcp__shirokuma-kb-dev__list_items
Parameters: {type: "issue", status: "Open"}
Expected: Array of issues having status "Open"
```

### List All Issues Including Closed
```
Tool: mcp__shirokuma-kb-dev__list_items
Parameters: {type: "issue", limit: 100}
Expected: Array of all issues (default excludes closed statuses)
Note: To include closed, need to check get_statuses for is_closable flag
```

### List Knowledge Items
```
Tool: mcp__shirokuma-kb-dev__list_items
Parameters: {
  type: "knowledge",
  limit: 20
}
Expected: Array of knowledge items
```

## Test 3.3: Update Operations

### Update Issue Status
```
Tool: mcp__shirokuma-kb-dev__update_item
Parameters: {
  id: 1,
  status: "In Progress"
}
Expected: Updated issue with new status
```

### Update Issue Priority and Tags
```
Tool: mcp__shirokuma-kb-dev__update_item
Parameters: {
  id: 2,
  priority: "HIGH",
  tags: ["performance", "critical", "backend"]
}
Expected: Updated issue with new priority and tags
```

### Partial Update (Description Only)
```
Tool: mcp__shirokuma-kb-dev__update_item
Parameters: {
  id: 3,
  description: "Dark mode feature request from multiple users"
}
Expected: Updated issue with new description, other fields unchanged
```

### Update with Invalid Status
```
Tool: mcp__shirokuma-kb-dev__update_item
Parameters: {
  id: 1,
  status: "InvalidStatus"
}
Expected: Error about invalid status
```

## Test 3.4: Related Items Management

### Add Related Items
```
Tool: mcp__shirokuma-kb-dev__update_item
Parameters: {
  id: 2,
  related: [1, 3]
}
Expected: Updated issue with related items
```

### Clear Related Items
```
Tool: mcp__shirokuma-kb-dev__update_item
Parameters: {
  id: 2,
  related: []
}
Expected: Updated issue with empty related array
```

### Self-reference Test
```
Tool: mcp__shirokuma-kb-dev__update_item
Parameters: {
  id: 1,
  related: [1]
}
Expected: May allow or reject self-reference depending on implementation
```

## Test 3.5: Content Update

### Update Issue Content
```
Tool: mcp__shirokuma-kb-dev__update_item
Parameters: {
  id: 1,
  content: "## Updated Issue Details\nThis issue has been updated with new information.\n\n### New Findings\n- Additional context discovered\n- Root cause identified\n- Solution proposed\n\n### Next Steps\n1. Review proposed solution\n2. Implement fix\n3. Test thoroughly"
}
Expected: Updated issue with new content
```

### Update Type (if supported)
```
Tool: mcp__shirokuma-kb-dev__update_item
Parameters: {
  id: 4,
  type: "feature"
}
Expected: Error (type change may not be allowed via update_item)
Note: Use change_item_type if type changes are needed
```

## Notes
- The `get_item` API doesn't require type parameter
- The `update_item` API works with item ID directly
- Related items are now numeric IDs, not string-based references
- Priority values: CRITICAL, HIGH, MEDIUM, LOW, MINIMAL
- Status values depend on what's configured in the system