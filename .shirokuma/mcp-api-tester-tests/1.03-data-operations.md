# Data Retrieval & Update Tests

Test read and update operations on created data.

## Test 3.1: Get Item Details

### Get Issue Details
```
Tool: get_item_detail
Parameters: {type: "issues", id: 1}
Expected: JSON response { data: { ... } } with full issue object
```

### Get Plan Details
```
Tool: get_item_detail
Parameters: {type: "plans", id: 1}
Expected: JSON response { data: { ... } } with full plan object including start_date and end_date
```

### Get Non-existent Item
```
Tool: get_item_detail
Parameters: {type: "issues", id: 999}
Expected: Error "issues with ID 999 not found. Use 'get_items' with type='issues' to see available items."
```

## Test 3.2: List Items with Filters

### List Open Issues
```
Tool: get_items
Parameters: {type: "issues", statuses: ["Open"]}
Expected: JSON response { data: [...] } with array of issues having status "Open"
```

### List All Issues Including Closed
```
Tool: get_items
Parameters: {type: "issues", includeClosedStatuses: true}
Expected: JSON response { data: [...] } with array of all issues including closed ones
```

### List with Date Range
```
Tool: get_items
Parameters: {
  type: "plans",
  start_date: "2025-01-01",
  end_date: "2025-12-31"
}
Expected: JSON response { data: [...] } with plans within date range
```

## Test 3.3: Update Operations

### Update Issue Status
```
Tool: update_item
Parameters: {
  type: "issues",
  id: 1,
  status: "In Progress"
}
Expected: JSON response { data: { ... } } with updated issue showing new status
```

### Update Issue Priority and Tags
```
Tool: update_item
Parameters: {
  type: "issues",
  id: 2,
  priority: "high",
  tags: ["performance", "critical", "backend"]
}
Expected: JSON response { data: { ... } } with updated issue showing new priority and tags
```

### Partial Update (Description Only)
```
Tool: update_item
Parameters: {
  type: "issues",
  id: 3,
  description: "Dark mode feature request from multiple users"
}
Expected: JSON response { data: { ... } } with updated issue showing new description, other fields unchanged
```

### Update with Invalid Status
```
Tool: update_item
Parameters: {
  type: "issues",
  id: 1,
  status: "InvalidStatus"
}
Expected: Error "Unknown status: 'InvalidStatus'"
```

## Test 3.4: Related Fields Update

### Add Related Items (Using Unified Field)
```
Tool: update_item
Parameters: {
  type: "issues",
  id: 2,
  related: ["issues-1", "issues-3", "docs-1"]
}
Expected: JSON response { data: { ... } } with updated issue containing:
- data.related: ["issues-1", "issues-3", "docs-1"]
```

### Test Legacy Fields Rejection
```
Tool: update_item
Parameters: {
  type: "issues",
  id: 2,
  related_tasks: ["issues-1", "issues-3"],
  related_documents: ["docs-1"]
}
Expected: Error "Field 'related_tasks' is not allowed. Use 'related' field instead."
```

### Self-reference Test (Using Unified Field)
```
Tool: update_item
Parameters: {
  type: "issues",
  id: 1,
  related: ["issues-1"]
}
Expected: Error about self-reference
```

### Test Legacy Field Rejection (related_tasks)
```
Tool: update_item
Parameters: {
  type: "issues",
  id: 1,
  related_tasks: ["issues-1"]
}
Expected: Error "Field 'related_tasks' is not allowed. Use 'related' field instead."
```