# MCP Type System Restructure Plan

## 概要

このディレクトリには、MCPのタイプシステムを現在の9タイプから2タイプ（items + sessions）に簡素化する計画文書が含まれています。

## 背景

### 現在の問題
- 9つのタイプが存在し、使い分けが不明確
- 250個以上のタグが無秩序に作成されている
- サブエージェントが適切なタイプを選択できない
- 情報の追跡が困難

### 解決策
- タイプを2つに削減（items + sessions）
- タグによる分類体系の確立
- Primary Categoryタグの必須化
- 明確なルールとバリデーション

## ドキュメント構成

### [00-restructure-plan.md](./00-restructure-plan.md)
移行計画の全体概要。現状分析、新構成案、移行スケジュール。

### [01-documents-to-preserve.md](./01-documents-to-preserve.md)
移行前に保存すべき重要なMCPドキュメントのリスト。

### [02-migration-steps.md](./02-migration-steps.md)
具体的な移行手順。スクリプト例、チェックリスト、ロールバック計画。

### [03-impact-analysis.md](./03-impact-analysis.md)
変更の影響を受けるコンポーネントの詳細分析。

### [04-tag-design.md](./04-tag-design.md)
新しいタグ体系の設計。階層構造、検証ルール、運用方法。

## クイックサマリー

### 新しい構成
```yaml
タイプ（2つのみ）:
  items:    すべての通常アイテム
  sessions: 時系列の特別管理

Primary Tags（必須・1つ選択）:
  #task     - やるべきこと
  #doc      - 文書・ガイド
  #knowledge - 再利用可能な知見
  #decision - 技術決定
  #handover - 引き継ぎ
  #test-result - テスト結果
  #daily    - 日次まとめ
```

### 主な変更点
1. **タイプ削減**: 9 → 2
2. **タグ体系化**: Primary/Secondary/Project の3層
3. **必須タグ制**: すべてのitemsにPrimary Tag必須
4. **権限簡素化**: タイプ権限からタグ権限へ

### スケジュール
- **Week 1**: 準備とテスト
- **Week 2**: システム更新  
- **Week 3**: 本番移行

## 意思決定が必要な項目

### 1. dailiesの扱い
**Option A**: sessionsに統合（特殊IDで管理）
**Option B**: items + #dailyタグ

推奨: Option B（柔軟性が高い）

### 2. current_stateの扱い
**Option A**: 特別なsession として管理
**Option B**: items + 特別なタグ

推奨: Option A（1つしか存在しない特殊性を考慮）

### 3. タグの自動削除
**handoverタグ**: 24時間後に自動削除するか？

推奨: 手動管理（自動削除は複雑性を増す）

## リスクと対策

### 高リスク
1. **データ移行エラー** → 完全バックアップ
2. **エージェント混乱** → 明確なルールと教育
3. **検索性能低下** → インデックス最適化

### 中リスク
1. **学習コスト** → 詳細ガイド作成
2. **既存スクリプト** → 互換性レイヤー

## 次のアクション

1. [ ] この計画のレビューと承認
2. [ ] 意思決定項目の確定
3. [ ] テスト環境の準備
4. [ ] ステークホルダーへの通知
5. [ ] 移行スクリプトの開発開始

## 質問・懸念事項

この計画について質問や懸念がある場合は、以下の点を確認してください：

1. 既存のワークフローへの影響は許容範囲か？
2. 2タイプ構成で将来の拡張性は十分か？
3. タグ管理の運用負荷は現実的か？

## 関連リソース

- 現在のMCPドキュメント: `mcp__shirokuma-knowledge-base__get_item_detail`
- タイプ定義: docs-14
- タグルール: docs-15
- エージェントルール: docs-16

---

最終更新: 2025-08-05