---
id: 143
type: issue
title: "ステアリング文書から言語ルールが自動適用されない問題"
status: Completed
priority: HIGH
description: "コマンド実行時にMCPのsteering文書に保存された言語設定が自動的に読み込まれず、適用されていない"
aiSummary: "Issue with automatic application of language rules from MCP steering documents during command execution, requiring manual intervention instead of automatic language setting detection and application"
tags: ["mcp","configuration","bug","steering","language"]
related: [141,142,146,150]
keywords: {"language":1,"steering":1,"mcp":0.9,"rule":0.9,"command":0.8}
concepts: {"configuration":0.9,"automation":0.8,"internationalization":0.8,"system integration":0.7,"software architecture":0.6}
embedding: "gI+AgICAgICNgIChgoCPgIWEgICAgICAjICEpoyAkoCOgICAgICAgJWAgK2TgIyAkoaAgICAgICMgISdkoCDgI2RgICAgICAiYCOk4mAgICRloCAgICAgI+AlJOBgISAi5GAgICAgICZgJCZgYCAgIOWgICAgICAk4CHoICAh4A="
createdAt: 2025-08-23T05:25:16.000Z
updatedAt: 2025-08-23T05:44:09.000Z
---

## 問題の詳細

現在、各コマンドのMarkdownに以下の記述があるが、実際には言語ルールが自動適用されていない：
```
## Language

Note: Language settings are configured in MCP steering documents
```

## 現状の問題点

1. **言語設定の未適用**
   - steering文書に言語ルール（日本語/英語）が保存されている
   - しかし、コマンド実行時に自動的に読み込まれない
   - 結果として言語が統一されない

2. **手動での対応が必要**
   - 現在は各コマンドで手動で言語を判断
   - または明示的にsteering文書を読み込む必要がある

## 解決策（実装済み）

### 暫定的解決策として実装
1. `.shirokuma/commands/shared/lang.markdown` を作成
2. ステアリング文書 #133 の内容を反映
3. すべてのコマンドとエージェントから参照

### 更新済みファイル
- **コマンド**: 24ファイル（基本、spec、vibeサブコマンド）
- **エージェント**: 8ファイル
- 合計32ファイルを更新

### 言語ルールの明確化
- カスタムコマンド定義ファイル: 英語で記述
- エージェント定義ファイル: 英語で記述
- ユーザーへの応答: 日本語

## 今後の改善案
将来的にはMCPステアリング文書から自動的に言語設定を読み込む機能の実装を目指す