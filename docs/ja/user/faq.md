# よくある質問（FAQ）

## 一般的な質問

### Q: Shirokuma MCP Knowledge Baseとは何ですか？

A: MCP (Model Context Protocol) を実装した統合知識管理システムです。イシュー、プラン、ドキュメント、ナレッジ、作業セッションなどを一元的に管理し、AIが効率的にアクセスできるように設計されています。

### Q: なぜ「人間の可読性ではなくAI処理のため」と書かれているのですか？

A: このシステムは、AIが情報を素早く理解し処理できるよう、構造化されたデータ形式を優先しています。冗長な説明を省き、高密度な情報を保持することで、AIの作業効率を最大化します。

### Q: どのようなデータを管理できますか？

A: 以下のタイプのデータを管理できます：
- **Issues（イシュー）**: バグ、タスク、課題
- **Plans（プラン）**: プロジェクト計画、マイルストーン
- **Docs（ドキュメント）**: 技術文書、ガイド
- **Knowledge（ナレッジ）**: チームの知識、ノウハウ
- **Sessions（セッション）**: 作業記録、活動ログ
- **Dailies（デイリー）**: 日次サマリー
- **カスタムタイプ**: 独自に定義したコンテンツタイプ

### Q: データはどこに保存されますか？

A: デフォルトでは `.shirokuma/data` ディレクトリに保存されます：
- **Markdownファイル**: 永続的なデータ保存（真実の源）
- **SQLiteデータベース**: 高速検索用のインデックス（再構築可能）

環境変数 `MCP_DATABASE_PATH` で保存場所を変更できます。

## セットアップに関する質問

### Q: Node.jsのバージョンが古いとどうなりますか？

A: Node.js 18.0.0以上が必要です。古いバージョンでは動作しません。以下で確認してください：
```bash
node --version
```

nvmを使用している場合：
```bash
nvm install 18
nvm use 18
```

### Q: MCPクライアントが接続できません

A: 以下を確認してください：

1. **ビルドの確認**
   ```bash
   npm run build
   ls -la dist/server.js  # ファイルが存在するか確認
   ```

2. **パスの確認**
   - 絶対パスを使用しているか
   - パスに日本語や特殊文字が含まれていないか

3. **設定の確認**
   ```json
   {
     "command": "node",
     "args": ["/absolute/path/to/dist/server.js"]
   }
   ```

### Q: データディレクトリを変更したい

A: 環境変数を設定します：
```bash
# Bashの場合
export MCP_DATABASE_PATH=/home/user/my-data

# Windowsの場合
set MCP_DATABASE_PATH=C:\Users\user\my-data
```

## 使用方法に関する質問

### Q: 大量のデータを扱えますか？

A: はい、以下の最適化により大規模データに対応しています：
- SQLite FTS5による高速全文検索
- バッチ処理による効率的なデータ処理
- インデックスによる高速クエリ
- ページネーション対応（`limit`パラメータ）

推奨事項：
- 1回の取得は100件以下に制限
- 定期的に不要なデータを削除
- 年度ごとにアーカイブ

### Q: 既存のMarkdownファイルをインポートできますか？

A: はい、以下の手順でインポートできます：

1. ファイル名を適切な形式に変更（例: `issues-1.md`）
2. フロントマターをJSON形式で追加
3. 適切なディレクトリに配置
4. データベースを再構築：
   ```bash
   npm run rebuild-db
   ```

フロントマターの例：
```markdown
---json
{
  "id": "1",
  "title": "タイトル",
  "tags": ["tag1", "tag2"],
  "created_at": "2025-01-29T10:00:00Z",
  "updated_at": "2025-01-29T10:00:00Z"
}
---

本文内容
```

### Q: カスタムタイプはどのように作成しますか？

A: `create_type`ツールを使用します：

```typescript
// 会議議事録タイプを作成
create_type({
  name: "meeting_notes",
  base_type: "documents",  // documentsベースで作成
  description: "会議議事録の管理"
})

// 使用例
create_item({
  type: "meeting_notes",
  title: "週次定例会議",
  content: "議事録内容..."
})
```

## トラブルシューティング

### Q: 「Database locked」エラーが出る

A: データベースが他のプロセスで使用されています：

1. 他のMCPサーバーインスタンスを停止
2. データベースファイルのロックを確認：
   ```bash
   lsof | grep search.db
   ```
3. データベースを再構築：
   ```bash
   npm run rebuild-db
   ```

### Q: 検索結果が表示されない

A: 以下を確認してください：

1. **インデックスの更新**
   ```bash
   npm run rebuild-db
   ```

2. **検索クエリの確認**
   - 日本語の場合は形態素で区切られることに注意
   - 部分一致検索を試す

3. **データの存在確認**
   ```bash
   ls -la .shirokuma/data/issues/
   ```

### Q: ファイルが認識されない

A: ファイル形式を確認してください：

- **ファイル名**: `{type}-{id}.md`（例: `issues-42.md`）
- **文字コード**: UTF-8
- **改行コード**: LFまたはCRLF
- **フロントマター**: JSON形式で必須フィールドを含む

### Q: パフォーマンスが遅い

A: 以下を試してください：

1. **データ量の確認**
   ```bash
   find .shirokuma/data -name "*.md" | wc -l
   ```

2. **インデックスの最適化**
   ```bash
   npm run rebuild-db
   ```

3. **メモリ制限の調整**
   ```bash
   NODE_OPTIONS="--max-old-space-size=4096" npm start
   ```

## セキュリティ

### Q: データは安全ですか？

A: 以下のセキュリティ対策を実装しています：
- 入力値のサニタイゼーション
- パストラバーサル攻撃の防止（`../`や絶対パスをブロック）
- SQLインジェクション対策（プレースホルダー使用）
- レート制限機能

### Q: バックアップはどうすればいいですか？

A: Markdownファイルが真実の源なので、データディレクトリをバックアップすれば完全に復元できます：

```bash
# 日次バックアップの例
tar -czf backup-$(date +%Y%m%d).tar.gz .shirokuma/data/

# 復元
tar -xzf backup-20250129.tar.gz
npm run rebuild-db
```

### Q: アクセス制御はありますか？

A: 現在のバージョンでは、MCPクライアントレベルでのアクセス制御に依存しています。将来的にRBAC（ロールベースアクセス制御）の実装を予定しています。

## その他

### Q: ライセンスは？

A: MITライセンスです。商用利用、改変、再配布が可能です。

### Q: 他の言語に対応していますか？

A: 現在は日本語と英語のドキュメントがあります。データ自体は任意の言語で作成できます。

### Q: サポートはどこで受けられますか？

A: 以下の方法でサポートを提供しています：
- GitHub Issues: バグ報告、機能要望
- ディスカッション: 質問、アイデア共有
- メール: shirokuma@gadget.to

### Q: 貢献したい

A: 貢献を歓迎します！[コントリビューションガイド](../developer/contributing.md)を参照してください。

### Q: ロードマップはありますか？

A: 主な開発予定：
- プラグインシステム
- WebUIの提供
- リアルタイム同期
- より高度な検索機能
- 多言語対応の強化